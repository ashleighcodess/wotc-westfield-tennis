;/*FB_PKG_DELIM*/

__d("FBUnifiedVideoBakedInTextAnnouncer.react",["CometPlaceholder.react","JSResourceForInteraction","lazyLoadComponent","react","react-compiler-runtime","useFBUnifiedVideoBakedInTextContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometBakedInTextAnnouncer.react").__setRef("FBUnifiedVideoBakedInTextAnnouncer.react"));function c(e){var t=o("react-compiler-runtime").c(2),n=e.bakedInTextEntries,a=r("useFBUnifiedVideoBakedInTextContext")(),i=a.isBakedInTextEnabled;if(n==null||!i)return null;var l;return t[0]!==n?(l=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"CometBakedInTextAnnouncer",children:s.jsx(u,{bakedInTextEntries:n})}),t[0]=n,t[1]=l):l=t[1],l}l.default=c}),98);
__d("StoriesBakedInTextAnnouncer.react",["CometPlaceholder.react","JSResourceForInteraction","StoriesBakedInTextContextProvider.react","lazyLoadComponent","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("lazyLoadComponent")(r("JSResourceForInteraction")("CometBakedInTextAnnouncer.react").__setRef("StoriesBakedInTextAnnouncer.react"));function c(e){var t=o("react-compiler-runtime").c(2),n=e.bakedInTextEntries,a=o("StoriesBakedInTextContextProvider.react").useStoriesBakedInTextContext(),i=a.isBakedInTextEnabled;if(n==null||!i)return null;var l;return t[0]!==n?(l=s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"CometBakedInTextAnnouncer",children:s.jsx(u,{bakedInTextEntries:n})}),t[0]=n,t[1]=l):l=t[1],l}l.default=c}),98);
__d("parseBakedInText",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.split(/[:.]/).filter(Boolean);if(t.length!==4)return r("FBLogger")("fb_reels_web").mustfix("Baked-in text parsing failed, incorrect time format!"),-1;var n=parseFloat(t[0]),o=parseFloat(t[1]),a=parseFloat(t[2]),i=parseFloat(t[3]);return n<0||n>23||o<0||o>59||a<0||a>59||i<0||i>999||isNaN(n)||isNaN(o)||isNaN(a)||isNaN(i)?(r("FBLogger")("fb_reels_web").mustfix("Baked-in text parsing failed, incorrect time format!"),-1):n*60*60+o*60+a+i/1e3}function s(e,t,n){var o="NOTE ",a=e.indexOf(o);if(a===-1)return[];var i=e.substring(a+o.length).replace(/\s+/g," ").trim();try{var l,s=JSON.parse(i),u=((l=s.ScreenReader)==null?void 0:l.elements)||[];return u.map(function(e){var o,a,i=["burned_in_text","sticker"];return i.includes(e.type)?{endTime:n,startTime:t,stickerLabel:(o=e.sticker_label)!=null?o:null,text:(a=e.text)!=null?a:null,type:e.type}:(r("FBLogger")("fb_reels_web").mustfix("Invalid BakedInTextContentType","Expected one of "+i.join(", ")+", but got: "+e.type),null)}).filter(Boolean)}catch(e){return r("FBLogger")("fb_reels_web").mustfix("Failed to decode Baked-in Text JSON",i),[]}}function u(t){var n=[];if(!t.startsWith("WEBVTT"))return r("FBLogger")("fb_reels_web").mustfix("Baked-in text payload does not start with WEBVTT"),n;for(var o=t.split("\n"),a=/^(\d{2}:\d{2}:\d{2}\.\d{3})\s+-->\s+(\d{2}:\d{2}:\d{2}\.\d{3})/,i=0;i<o.length;i++){var l=o[i],u=l.match(a);if(u){var c=e(u[1]),d=e(u[2]);if(c===-1||d===-1)continue;for(var m=i+1;m<o.length;){var p=o[m];if(p.trim().startsWith("NOTE ")){for(var _=[p],f=0,g=0;g<p.length;g++)p[g]==="{"?f++:p[g]==="}"&&f--;for(m++;m<o.length&&f>0;){for(var h=o[m],y=0;y<h.length;y++)h[y]==="{"?f++:h[y]==="}"&&f--;if(_.push(h),f===0)break;m++}var C=_.join("\n"),b=s(C,c,d);n.push.apply(n,b);break}if(p.trim().match(a))break;m++}}}return n}l.default=u}),98);
__d("fetchBakedInText",["FBLogger","parseBakedInText"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=new FileReader;return window.fetch(e).then(function(e){return e.blob()}).then(function(a){var i=new File([a],"file.txt",{type:"text/plain"});o.onload=function(){var a=o.result;if(typeof a=="string"){var i=r("parseBakedInText")(a);t(i)}else r("FBLogger")("fb_reels_web").mustfix("Error reading baked-in text file: ",e),n()},o.onerror=function(){r("FBLogger")("fb_reels_web").mustfix("Error reading baked-in text file: ",e),n()},o.readAsText(i)}).catch(function(){r("FBLogger")("fb_reels_web").mustfix("Error fetching baked-in text file: ",e),n()}),function(){o.abort()}}l.default=e}),98);
__d("useCometVideoSyncBakedInTextSetting_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometVideoSyncBakedInTextSetting_video",selections:[{alias:"baked_in_text_delivery",args:[{kind:"Literal",name:"video_delivery_request",value:{baked_in_text_and_stickers_url_requests:[{}]}}],concreteType:"XFBVideoDeliveryResponse",kind:"LinkedField",name:"video_delivery_response",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBBakedInTextAndStickersUrlResponse",kind:"LinkedField",name:"baked_in_text_and_stickers_urls",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"baked_in_text_and_stickers_url",storageKey:null},{alias:null,args:null,concreteType:"XFBBakedInTextAndStickersUrlMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"locale",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'video_delivery_response(video_delivery_request:{"baked_in_text_and_stickers_url_requests":[{}]})'}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useCometVideoSyncBakedInTextSetting",["CometRelay","IntlCurrentLocale","fetchBakedInText","react","react-compiler-runtime","useCometVideoSyncBakedInTextSetting_video.graphql","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useMemo,m=u.useRef,p=u.useState;function _(t,a){var i,l,s,u=o("react-compiler-runtime").c(8),d=o("CometRelay").useFragment(e!==void 0?e:e=n("useCometVideoSyncBakedInTextSetting_video.graphql"),t),_=p(null),f=_[0],g=_[1],h=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),y=m(null),C=r("IntlCurrentLocale").code;d==null||(i=d.baked_in_text_delivery)==null||i.baked_in_text_and_stickers_urls;var b;if(u[0]!==(d==null||(l=d.baked_in_text_delivery)==null?void 0:l.baked_in_text_and_stickers_urls)){var v,S,R,L=(v=d==null||(S=d.baked_in_text_delivery)==null?void 0:S.baked_in_text_and_stickers_urls)!=null?v:[];b=L.find(function(e){var t;return(e==null||(t=e.metadata)==null?void 0:t.locale)===C}),u[0]=d==null||(R=d.baked_in_text_delivery)==null?void 0:R.baked_in_text_and_stickers_urls,u[1]=b}else b=u[1];var E=b,k=(s=E==null?void 0:E.baked_in_text_and_stickers_url)!=null?s:null,I,T;return u[2]!==f||u[3]!==h||u[4]!==a||u[5]!==k?(I=function(){!h||!a||k==null||f!=null||(y.current!=null&&(y.current(),y.current=null),y.current=r("fetchBakedInText")(k,function(e){g(e),y.current=null},function(){g(null),y.current=null}))},T=[f,h,a,k,g],u[2]=f,u[3]=h,u[4]=a,u[5]=k,u[6]=I,u[7]=T):(I=u[6],T=u[7]),c(I,T),f}l.default=_}),98);
__d("useFBUnifiedVideoSyncBakedInTextSetting_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFBUnifiedVideoSyncBakedInTextSetting_video",selections:[{args:null,kind:"FragmentSpread",name:"useCometVideoSyncBakedInTextSetting_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useFBUnifiedVideoSyncBakedInTextSetting",["CometRelay","useCometVideoSyncBakedInTextSetting","useFBUnifiedVideoBakedInTextContext","useFBUnifiedVideoSyncBakedInTextSetting_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=o("CometRelay").useFragment(e!==void 0?e:e=n("useFBUnifiedVideoSyncBakedInTextSetting_video.graphql"),t),i=r("useFBUnifiedVideoBakedInTextContext")(),l=i.isBakedInTextEnabled;return r("useCometVideoSyncBakedInTextSetting")(a,l)}l.default=s}),98);
__d("useStoriesSyncBakedInTextSetting_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStoriesSyncBakedInTextSetting_video",selections:[{args:null,kind:"FragmentSpread",name:"useCometVideoSyncBakedInTextSetting_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("useStoriesSyncBakedInTextSetting",["CometRelay","StoriesBakedInTextContextProvider.react","useCometVideoSyncBakedInTextSetting","useStoriesSyncBakedInTextSetting_video.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=o("CometRelay").useFragment(e!==void 0?e:e=n("useStoriesSyncBakedInTextSetting_video.graphql"),t),i=o("StoriesBakedInTextContextProvider.react").useStoriesBakedInTextContext(),l=i.isBakedInTextEnabled;return r("useCometVideoSyncBakedInTextSetting")(a,l)}l.default=s}),98);